<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fluttrim Docs</title>
    <meta name="description" content="Fluttrim project and operations documentation." />
    <link rel="canonical" href="https://fluttrim.curogom.dev/docs/" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="topbar container">
      <div class="brand">
        <img src="../assets/logo-cropped.png" alt="Fluttrim logo" class="brand-mark" />
        <span id="brand-title">Fluttrim Docs</span>
      </div>
      <nav class="nav-links">
        <a id="nav-home" href="/">Home</a>
        <a id="nav-docs" href="/docs/" class="active">Docs</a>
        <a id="nav-pubdev" href="https://pub.dev/packages/fluttrim_core" target="_blank" rel="noopener noreferrer"
          >pub.dev</a
        >
        <a id="nav-github" href="https://github.com/curogom/fluttrim" target="_blank" rel="noopener noreferrer"
          >GitHub</a
        >
      </nav>
      <div class="lang-switch" role="group" aria-label="Language">
        <button data-lang-btn="en" class="is-active">EN</button>
        <button data-lang-btn="ko">KO</button>
      </div>
    </header>

    <main class="container">
      <section class="hero">
        <h1 id="hero-title">Documentation is available under /docs paths.</h1>
        <p id="hero-body">
          Browse product and operations docs directly in the site. English and Korean are both available.
        </p>
      </section>

      <section>
        <h2 id="core-heading">Core Docs</h2>
        <div id="core-docs" class="grid"></div>
      </section>

      <section>
        <h2 id="ops-heading">Operations Docs</h2>
        <div id="ops-docs" class="grid"></div>
      </section>

      <p id="docs-notice" class="notice">Note: Web docs are deployment-time copies of repository sources.</p>
    </main>

    <script src="./docs.js"></script>
    <script>
      function setLanguage(language) {
        const lang = window.FluttrimDocs.setPreferredLanguage(language);
        const i18n = window.FluttrimDocs.getI18n(lang);

        document.getElementById("brand-title").textContent = i18n.docsTitle;
        document.getElementById("nav-home").textContent = i18n.home;
        document.getElementById("nav-docs").textContent = i18n.docs;
        document.getElementById("nav-pubdev").textContent = i18n.pubdev;
        document.getElementById("nav-github").textContent = i18n.github;
        document.getElementById("hero-title").textContent = i18n.heroTitle;
        document.getElementById("hero-body").textContent = i18n.heroBody;
        document.getElementById("core-heading").textContent = i18n.coreHeading;
        document.getElementById("ops-heading").textContent = i18n.opsHeading;
        document.getElementById("docs-notice").textContent = i18n.notice;

        document.querySelectorAll("[data-lang-btn]").forEach((button) => {
          button.classList.toggle("is-active", button.getAttribute("data-lang-btn") === lang);
        });

        window.FluttrimDocs.renderDocCards(document.getElementById("core-docs"), "core", lang);
        window.FluttrimDocs.renderDocCards(document.getElementById("ops-docs"), "ops", lang);
      }

      document.querySelectorAll("[data-lang-btn]").forEach((button) => {
        button.addEventListener("click", () => {
          setLanguage(button.getAttribute("data-lang-btn"));
        });
      });

      setLanguage(window.FluttrimDocs.getPreferredLanguage());
    </script>
  </body>
</html>
